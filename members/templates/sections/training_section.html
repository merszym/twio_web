{% load static %}
{% load custom_filters %}

<section class="section" id="training_section">
    <div class="content">
        <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--12-col center">
                <h1 class="light">Training</h1>
            </div>
        </div>
        <!-- Here the Messages -->
        {% if request.user.is_authenticated %}
            {% if request.user.profile.permission_level > 1 %}
            <div class="center m-2">
                <div>
                    <button
                        hx-get="{% url 'main_message_create' %}?display=sessions"
                        hx-target="#modal-blank"
                            class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored modal_open">
                        <div id="tt1" class="material-icons">campaign</div>
                    </button>
                </div>
            </div>
            {% endif %}
        {% if messages %}
        <div class="mdl-grid">
            <div class="mdl-cell mdl-cell--12-col-tablet mdl-cell--10-col mdl-cell--1-offset-desktop p-1 secondary-bg" >
                {% for msg in messages %}
                <div class="flex_row">
                    <div>
                        <span class="light">[{{msg.author.first_name}}, {{msg.date |date:'d.m.Y'}}]: <strong>{{msg.title}}</strong> </span>
                        <p class="light">{{msg.message}}</p>
                    </div>
                    <div>
                        {% if request.user.profile.permission_level > 1 %}
                        <form>
                            {% csrf_token %}
                            <a hx-post="{% url 'message_delete' msg.pk %}?display=sessions"
                                hx-confirm="Hinweis lÃ¶schen?"
                                hx-target="#training_section"
                                class="mdl-button mdl-js-button mdl-button--icon">
                                <i class="material-icons light">delete</i>
                            </a>
                        </form>
                        {% endif %}
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% endif %}
        <style>
            .mdl-card{
                max-width:100% !important;
                background: #F0F4FA;
            }
        </style>
        <div class="mdl-grid">
            {% for short, day in session_days %}
            <!-- one column for the sessions of each day -->
            <div class="mdl-cell mdl-cell--3-col mdl-cell--4-col-tablet">
                {% for session in sessions|lookup:short %}
                {% include 'snippets/training/session_card.html' %}
                {% endfor %}
            </div>
            {% endfor %}
        </div>
    </div>
    {% if not request.user.is_authenticated %}
    <section class="content hero">
    <!--Probetraining-->
    {% include 'snippets/training/trial_card.html' %}
    </section>
    {% endif %}
    {% if request.user.profile.permission_level > 1 %}
    <div class="center">
        <div>
            <button
                hx-get="{% url 'main_session_create' %}"
                hx-target="#modal-blank"
                class="mdl-button mdl-js-button mdl-button--fab mdl-button--colored modal_open">
                <i class="material-icons">add</i>
            </button>
        </div>
    </div>
    {% endif %}
</section>